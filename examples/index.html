<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Base</title>
    </head>
    <body>
        <script>
          let ipcRenderer = require('electron').ipcRenderer;
          ipcRenderer.send('show-dev');

          require('pixi.js');
          const Bitmap = require('./js/bitmap');
          const Sprite = require('./js/sprite');
          const RGUI = require('../lib/rgui');
          const Input = RGUI.Input;

          let renderer = PIXI.autoDetectRenderer(800, 600,{backgroundColor : 0x1099bb});
          document.body.appendChild(renderer.view);
          let stage = new PIXI.Container();

          RGUI.init();
          Input.init();

          let basicText = new PIXI.Text('');
          basicText.x = 10;
          basicText.y = 10;
          let bitmap = Bitmap.load('./res/test.png');
          let image = new RGUI.ImageBox({
            x: 50,
            y: 50,
            width: 500,
            height: 500,
            type: 0,
            focus: true,
            image: bitmap
          });

          let button = new RGUI.SpriteButton({
            x: 600,
            y: 100,
            images: [Bitmap.load('./res/0.png'), Bitmap.load('./res/1.png'), Bitmap.load('./res/2.png')]
          });

          button.eventManger.on('run', {}, function () {
            console.log(23333);
            image.type = image.type == 1 ? 0 : 1;
          });

          image.eventManger.on('a', {}, function () {
            image.xScroll(-5)
          });
          image.eventManger.on('d', {}, function () {
            image.xScroll(5)
          });
          image.eventManger.on('w', {}, function () {
            image.yScroll(-5)
          });
          image.eventManger.on('s', {}, function () {
            image.yScroll(5)
          });

          let bar = new RGUI.ProgressBar({
            x: 0,
            y: 0,
            width: 100,
            height: 30
          });

          stage.addChild(basicText);
          stage.addChild(image);
          stage.addChild(button);
          stage.addChild(bar);

          animate();

          function animate() {
            basicText.text = "x:" + Input.x + ' y:' + Input.y + 'w s a d移动图片';
            requestAnimationFrame(animate);
            button.update();
            image.update();
            bar.update();
            renderer.render(stage);
            Input.update();
          }



        </script>
    </body>
</html>